<!DOCTYPE html>
<html lang="ru">
<head>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="../css/bootstrap.min.css">
<link rel="stylesheet" href="../css/collagen_test.css">
<style type="text/css"> 
</style>
</head>
	<body>
		<div class="container-fluid" >
			<div class="row main-row">
				<div  class="col-7 col-sm-7 col-md-8 col-lg-9" id="canvas_container">
<!--canvas-->				
						<div  class="canvas-container" style="padding-right: 5px; padding-left: 5px;">						
							<canvas data-canvas="container"  id="canvas" style=""></canvas>							
						</div>
						<button data-hide_panel="container" type="button"  name="hide_panel" class="btn btn-info btn-sm" style="position: fixed;  top: 2px; right: 2px; z-index:5" title="Скрыть отобразить панель инструментов">hide</button>
				</div><!-- end col-7 -->
				
				<div class="col-5 col-sm-5 col-md-4 col-lg-3 right_collagen_panel">
				

					<form data-main_form="container" name="formA" onsubmit="return false" enctype="multipart/form-data" action="__URL__" method="POST" style="margin-top: 3px;">
<!-- загрузка картинки, шаги назад для преобразований -->							
								<div class="form-row panel_phone_img_1">
								    <div class="form-group col-2">
										 <div class="form-group">
											<label style="padding-left: 4px; padding-right: 4px;" name="load_img_click" class="inp-file" for="exampleFormControlFile1" title="Загрузить картинку с компьютера"><svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-download" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"/><path fill-rule="evenodd" d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z"/></svg></label>
											<input name="load_img" type="file" class="form-control-file form-control-sm"  id="exampleFormControlFile1">
										</div>
									</div>
									<div class="form-group col-8">
										<button type="button"  name="step_back" class="btn btn-success btn-sm" title="Шаг назад для преобразований фоновой картинки"><</button>
										<button type="button"  name="save_img" class="btn btn-success btn-sm" title="Сделать снимок фонового изображения"><svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-lock" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M11.5 8h-7a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1h7a1 1 0 0 0 1-1V9a1 1 0 0 0-1-1zm-7-1a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h7a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-7zm0-3a3.5 3.5 0 1 1 7 0v3h-1V4a2.5 2.5 0 0 0-5 0v3h-1V4z"/></svg></button>
										<button type="button"  name="restore_img" class="btn btn-warning btn-sm" title="Отобразить предыдущий снимок фонового изображения">↓</button>
										<button type="button"  name="restart_img" class="btn btn-danger btn-sm" title="Восстановить начальное изображение"><svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-arrow-clockwise" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3.17 6.706a5 5 0 0 1 7.103-3.16.5.5 0 1 0 .454-.892A6 6 0 1 0 13.455 5.5a.5.5 0 0 0-.91.417 5 5 0 1 1-9.375.789z"/><path fill-rule="evenodd" d="M8.147.146a.5.5 0 0 1 .707 0l2.5 2.5a.5.5 0 0 1 0 .708l-2.5 2.5a.5.5 0 1 1-.707-.708L10.293 3 8.147.854a.5.5 0 0 1 0-.708z"/></svg></button>
										<button   type="button" name="start_video" class="btn btn-info btn-sm" title="начать запись видео">Start</button>
									</div>
								</div>							
					<!--control points -->						
						<div data-control_points="container" class="control-points">
						  <div  class="form-group form-row">
							<div class="form-group col-2">
								<span name="point_x" type="text"  style="display: inline-block; width: 60px; padding: 0px; font-size: 15px; color: red;"  placeholder="x point" title="Координаты точки X на canvas"></span>
								<span name="point_y" type="text"  style="display: inline-block; width: 60px; padding: 0px;  font-size: 15px; color: red;" placeholder="y point" title="Координаты точки Y на canvas"></span>
							</div>
							<div class="form-group col-3">
								<input name="control_point_x" type="text"  style="width: 60px; padding: 0px; font-size: 14px; margin-top: 2px;"  placeholder="x point" title="Координаты  X на canvas">
								<input name="control_point_y" type="text"  style="width: 60px; padding: 0px;  font-size: 14px;" placeholder="y point" title="Координаты  Y на canvas">
							</div>
							<div class="form-group col-3">
								<button type="button" name="move_coner_to_point" style="width: 75px; " class="btn btn-outline-info btn-sm" title="Поместить верхний угол спрайта или контура в точку на координатах">Угол</button>
								<button type="button" name="move_center_to_point" style="width: 75px; " class="btn btn-outline-info btn-sm" title="Поместить центр спрайта или контура в точку на координатах">Центр</button>							
							</div>
							<div class="form-group col-4">
							   <div  name="current_operation" style="background-color: green; color: white;">common</div>
							</div>
						   </div>	
						</div>	
<!-- панель кнопок для манипуляции с ввыделением, спрайтами -->														 
                                 <div name="common_btns_class">
									<button type="button"  style="margin-top: 5px;" name="reset_area" class="btn btn-dark btn-sm">Сбросить выделение</button> 
									
								 </div>
							<div class="form-row"  style="">	 							  
								  <button type="button"  style="margin-top: 5px; margin-left: 2px;" name="clear_phone" class="btn btn-secondary btn-sm" title="Установить прозрачность фона = 0">Очистить фон</button>
								  <button type="button"  style="margin-top: 5px; margin-left: 2px;" name="operation_with" class="btn btn-primary btn-sm d-none">Работать с фоном</button> 								 
							</div>
							
								  
					</form>												
<!-- массив спрайтов --->							
<ul data-sprites="array" class="list-group" style="margin-top: 10px; margin-bottom: 10px; max-height: 300px; overflow: auto;">
							<div  class="sprites-settings">
							  <div class="form-row">
							     <div class="form-group col-12" >								    
									<input type="checkbox" name="show_box" checked  title="Показать граници спрайта">
									<label class="form-check-label" style="font-size: 14px;"  for="exampleCheck1" title="Показать границы спрайта">box</label>	
									<input type="checkbox" name="show_points"  title="Показать точки контура">
									<label class="form-check-label" style="font-size: 14px;" for="exampleCheck1" title="Показать точки контура">points</label>
								<!--</div>	
								<div class="form-group col-5">-->
									<button type="button" style="padding: 2px;"  name="add_control_point" class="btn btn-success btn-sm" title="Добавить текущему спрайту контрольную точку №1 восстановления координат"><svg width="1em" height="1em" style="position: relative; bottom: 2px;" viewBox="0 0 16 16" class="bi bi-dice-1" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M13 1H3a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2zM3 0a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V3a3 3 0 0 0-3-3H3z"/><circle cx="8" cy="8" r="1.5"/></svg></button>
									<button type="button" style="padding: 2px;"  name="all_to_control_points" class="btn btn-warning btn-sm" title="Вернуть все спрайты на контрольные точки №1"><svg width="1em" height="1em" style="position: relative; bottom: 2px;" viewBox="0 0 16 16" class="bi bi-arrow-left-square-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2zm9.5 8.5a.5.5 0 0 0 0-1H5.707l2.147-2.146a.5.5 0 1 0-.708-.708l-3 3a.5.5 0 0 0 0 .708l3 3a.5.5 0 0 0 .708-.708L5.707 8.5H11.5z"/></svg></button>
									<button type="button" style="padding: 2px;" name="add_control_sprite_point" class="btn btn-dark btn-sm" title="Добавить текущему спрайту контрольную точку №2 восстановления координат"><svg width="1em" height="1em" style="position: relative; bottom: 2px;" viewBox="0 0 16 16" class="bi bi-dice-1" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M13 1H3a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2zM3 0a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V3a3 3 0 0 0-3-3H3z"/><circle cx="8" cy="8" r="1.5"/></svg></button>
									<button type="button" style="padding: 2px;"  name="all_to_control_sprite_points" class="btn btn-secondary btn-sm" title="Вернуть все спрайты на контрольные точки №2"><svg width="1em" height="1em" style="position: relative; bottom: 2px;" viewBox="0 0 16 16" class="bi bi-arrow-left-square-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2zm9.5 8.5a.5.5 0 0 0 0-1H5.707l2.147-2.146a.5.5 0 1 0-.708-.708l-3 3a.5.5 0 0 0 0 .708l3 3a.5.5 0 0 0 .708-.708L5.707 8.5H11.5z"/></svg></button>																		
									<button type="button"  name="code_edition" style="padding: 2px;" class="btn btn-info btn-sm" title="добавить функции спрайтам: скрыть, отобразить форму">code</button>									
									<button name="form_show" type="button" style="padding: 0px; float: right; position: relative; top: 3px; padding-right: 2px; padding-left: 2px;"  name="" class="btn btn-success btn-sm" title="Скрыть, отобразить список спрайтов">—</button>
								</div>	
							   </div>	
							</div>
					<!---- добавить функции спрайтам	-->	
						<form data-code_edition_panel="container" class="d-none" name="code_edition_panel" style="margin-top: 0px;" onsubmit="return false" >
						<div class="form-group">
							<textarea name="code" rows="4" cols="45" type="text"  class="form-control form-control-sm"  placeholder="this_ - доступ к rootLink, sprites - доступ к спрайтам  sprites_group - доступ к скелетным спрайтам">modules.animation=animationLopLayer(tiles_bg,tiles_common, 60);</textarea>
						</div>
							<button type="button" name="apply_code" style="margin-bottom: 10px; margin-top: 5px;" class="btn btn-info btn-sm">play</button>
							<button type="button" name="stop_code" style="margin-bottom: 10px; margin-top: 5px;" class="btn btn-sm btn-success">stop</button>
							<button type="button" name="copy_line"  style="margin-bottom: 10px; margin-top: 5px;" class="btn btn-success btn-sm" title="скопировать контур для операций со спрайтаом" >copy line</button>
							<input type="checkbox" name="enable_sprite_events"   title="Включить прослушивание событий клавиатуры и клика мыши спрайтам">
							<label class="form-check-label" style="font-size: 14px;"  for="exampleCheck1" title="events">events</label>
							
						</form>
					<!--- -->			
							<div class="sprites">	
								<li data-sprite="template" class="list-group-item">
									<input style="width: 95px;" name="id" type="text"  placeholder="" title="Изменить id спрайта">
									<button type="button" name="rm_sprite" class="btn btn-danger btn-sm">remove</button>
									<button type="button" name="show_sprite" class="btn btn-secondary btn-sm" title="скрыть">hide</button>
									<button type="button" name="layer_up" class="btn btn-info btn-sm" title="Поднять спрайт на верхний слой">Слой up</button>
									<button type="button" name="save_sprite" class="btn  btn-success btn-sm" title="Сохранить спрайт на компьютере в локальном хранилище">Save</button>
									<button type="button" name="to_control_point" class="btn btn-warning btn-sm" title="Переместить спрайт на контрольную точку №1">ctrl</button>
									<!--<button type="button" name="prev_frame" class="btn btn-success btn-sm" title="показать предыдущий фрейм(картинку)"> << </button>
									<button type="button" name="next_frame" class="btn btn-success btn-sm" title="показать следующий фрейм(картинку)">>></button>-->
								</li>
							</div>							
						</ul>
<!--- tiles -->
		<form data-tiles_form="container" class="" name="tiles_form" style="margin-top: 0px;" onsubmit="return false" >
						<div class="form-group">
							<textarea name="code_form" rows="4" cols="45" type="text"  class="form-control form-control-sm"  placeholder="tile_bg спрайты основания, tile - обычные спрайты "></textarea>
						</div>
							<button type="button" name="add_tile_bg" style="margin-bottom: 10px; margin-top: 5px;" title="Добавить фоновый объект" class="btn btn-info btn-sm">add tile bg</button>
							<button type="button" name="add_tile_common" style="margin-bottom: 10px; margin-top: 5px;" title="Добавить объект анимации" class="btn btn-sm btn-info">add tile </button>
							 <button type="button" name="add_collision" style="margin-bottom: 10px; margin-top: 5px;" title="добавить зону непроходимости (4точки прямоугольник)" class="btn btn-sm btn-info">add collision</button>
                            <button type="button" name="create_scene" style="margin-bottom: 10px; margin-top: 5px;" title="изменить массив" class="btn btn-sm btn-success">update</button>
							
		</form>						
<!-- загрузить, удалить сохраненный спрайт 	-->						
							<div data-save_sprites="array" class="">
								<button  type="button" name="load_save_sprites" class="btn btn-info btn-sm">Показать сохраненные спрайты</button>
							
								<ul  class="list-group" style="max-height: 300px; overflow: auto; margin-top: 10px; ">
									<li data-save_sprite="template" class="list-group-item" >
										<span name="id"></span>
										<button type="button" name="create_save_sprite" class="btn btn-primary btn-sm">Создать</button>
										<button type="button" name="rm_save_sprite" class="btn btn-danger btn-sm">Удалить</button>
										<input type="checkbox" name="to_beginning_coordinats"  title="Отобразить в начале координат">
										<label class="form-check-label" for="exampleCheck1" >top left</label>										
									</li>
								</ul>
<!-- сохранить, загрузить проект -->								
                               <div  style="margin-top: 10px;" >
									<input  name="project_name" type="text" style="width: 80px; position: relative; top: 3px;"  placeholder="name" title="Название проекта">
									<button   type="button" name="save_project" class="btn btn-info btn-sm" title="Сохранить все спрайты и фоновую картинку в json проект">Save project</button>
									<label  name="load_project_click" class="inp-file" style="position: relative; top: 3px; padding-top: 4px; padding-bottom: 3px;" for="load_project_json" title="Загрузить сохраненный проект">Load project</label>
									<input  name="load_project" type="file" class="form-control-file form-control-sm"  style="position: relative; top: 0px; visibility: hidden;" id="load_project_json">								
								</div>							
							</div>
							
<!--загрузить модуль -->						
						<form data-form_load_module="container" class="" name="form_load_module" style="margin-top: 0px;" onsubmit="return false"  style="margin-top: 10px;">                  		
							<p name="form_show" style="font-size: 17px;" class="clicker">Load module <span>+</span></p>

							<div class="d-none">
							    <div class="form-group form-row ">
									<div class="form-group col-9">
										<input type="text" name="module_url"  class="form-control form-control-sm"  placeholder="module url" value="https://sergeyovechkin.github.io/collage_n/js/modules/drawStar.js">	
									</div>
									<div class="form-group col-3">
										<button type="button" name="load_module" class="btn btn-info btn-sm">Загрузить модуль</button>										
									</div>
								</div>
								<div class="form-group form-row ">
								    <div class="form-group col-9">
										<textarea name="colagen_settings" rows="5" cols="45" type="text"  class="form-control form-control-sm"  title="общие настройки, автозагружаемые модули и стили при старте приложения"></textarea>
									 </div>
									 <div class="form-group col-3">
									     <button type="button" name="save_colagen_settings" class="btn btn-info btn-sm">Сохранить</button>
									 </div>
								</div>			
							</div>
							</p>	
						</form>
							
							
				
							
							                       
				</div><!-- end col-5 -->
<!-- -->												
			</div><!--row-->
		</div><!-- end container-fluid -->

       <script src="../js/sprite_bones.js"></script>	
	   <script src="../js/draw_functions.js"></script> 
	   <script src="../js/htmlix.js"></script>
	   <script src="../js/sprites.js"></script>    
	   <script src="../js/functions.js"></script>	   
	   <script src="../js/test/interface_test.js"></script>
	   <script src="../js/test/tiles.js"></script>
	   <script src="../js/test/main_test.js"></script>
	   <!--<script src="../js/test/socket.js"></script>-->
    </body>
	
</html>